# Keyboard Date Input

[EN](./README.md) / JA

## 概要
`keyboard-date-input` は、キーボード操作で日付や月を素早く正確に入力できる React コンポーネントライブラリです。フォーマットミスを防ぎ、日付入力を効率化します。

- **対応フォーマット:**
  - 日付: `YYYY/MM/DD`
  - 月: `YYYY/MM`
  - 年: 1000〜9999

## インストール
```bash
npm install keyboard-date-input
```

## クイックスタート

### プリセットコンポーネントの利用
以下のようにコンポーネントをインポートして使えます:
```javascript
import { DateInput, MonthInput } from 'keyboard-date-input';
```
使用例:
```jsx
<DateInput
  value={dateValue}
  onChange={setDateValue}
  className="date-input"
/>
```

react-hook-form などのフォームライブラリとも組み合わせて利用できます:
```jsx
const { register } = useForm();
// ...
return (
  <form>
    <DateInput {...register('date')} className="date-input" />
  </form>
);
```

### カスタム入力コンポーネントの拡張
独自の入力コンポーネントにも日付入力機能を追加できます:
```javascript
import { withDateInputFeature } from 'keyboard-date-input';
```
デコレートして利用:
```jsx
const DecoratedInput = withDateInputFeature(YourInputComponent);
// ...
return <DecoratedInput value={dateValue} onChange={handleChange} />;
```

## APIリファレンス
- **DateInput**: 日付入力用Reactコンポーネント（`YYYY/MM/DD`）。標準の `<input>` プロパティをすべて受け取ります。
- **MonthInput**: 月入力用Reactコンポーネント（`YYYY/MM`）。標準の `<input>` プロパティをすべて受け取ります。
- **withDateInputFeature(Component)**: 任意の入力コンポーネントに日付入力機能を追加する高階コンポーネント。
- **withMonthInputFeature(Component)**: 任意の入力コンポーネントに月入力機能を追加する高階コンポーネント。

## 主な機能・挙動

### 基本仕様
- 数字のみ入力可能。数字以外は無視されます。
- **初回入力モード** と **編集モード** の2つのモードがあります。

### 初回入力モード
- 入力が進むごとに自動で「年→月→日」とフォーカスが移動します。
- スラッシュ（`/`）は自動で挿入されます。
- 入力ステップ: 年 → 月 → 日

#### 年
- 4桁の数字を入力。4桁入力で自動的に月へ移動。
- **バックスペース:** 1文字ずつ削除。
- **矢印キー:** 無効。

#### 月
- 1桁目:
  - `0`: 無視。
  - `3-9`: 0パディングして日へ移動。
  - `1`: 2桁目の入力を待つ。
- 2桁目:
  - `3-9`: 日の入力として扱う。
  - `0-2`: 月を確定し日へ移動。
- **バックスペース:** 1桁ずつ削除。1桁目が消えると年へ戻る。
- **矢印キー:**
  - 左: 年へ移動。
  - 右: 日へ移動（入力済みの場合）。

#### 日
- 1桁目:
  - `0`: 無視。
  - `1-9`: 0パディング。
- 2桁目:
  - 1桁目と組み合わせ、月の日数を超える場合は無視。
- **バックスペース:** 日を `00` にリセット。
- **矢印キー:**
  - 左: 月へ移動。

### 編集モード
- 入力が完了（`yyyy/mm/dd`）すると編集モードになります。

#### 年の編集
- カーソルが年にあるとき、入力は左詰めでシフトされます。
- **バックスペース:** 年を `0000` にリセット。
- **右矢印:** 月へ移動。

#### 月の編集
- カーソルが月にあるときの入力ルール:
  - `0`: 月が `01` の場合は `10` へ。
  - `1`: `01` または `11` の場合は `11` へ、それ以外は `01`。
  - `2`: `01` または `11` の場合は `12` へ、それ以外は `02`。
  - `3-9`: 0パディングして新しい月に。
- **バックスペース:** 月を `00` にリセット。
- **左右矢印:** 年/日へ移動。

#### 日の編集
- カーソルが日にあるとき、1桁目と入力値を組み合わせて月の日数を超えないか判定。
- **バックスペース:** 日が`00`の場合、日を削除して月に入力に移行。`00`出ない場合は、日を `00` にリセット。

## ライセンス
MIT License